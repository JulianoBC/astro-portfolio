---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/header/Header.astro';

const pageTitle = "Contact Me";
---

<Layout title={pageTitle}>
  <Header />
  <main>
    <section class="customer-developer">
      <h2>Common Problems and Solutions</h2>
      <div class="conversation">
        <div class="customer-problem">
          <img src="data:image/svg+xml;utf8,<svg width='100' height='100' xmlns='http://www.w3.org/2000/svg'><rect width='100' height='100' fill='#ddd'/><text x='50' y='50' font-size='12' text-anchor='middle' dominant-baseline='middle'>Speed</text></svg>" alt="Website Speed" class="problem-image" />
          <h3>Problem: My website is slow and losing customers.</h3>
          <p>I understand the frustration. Slow websites can significantly impact user experience and your bottom line. We can analyze your website's performance, identify bottlenecks, and implement optimizations like image compression, code minification, and leveraging browser caching to speed things up.</p>
        </div>
        <div class="customer-problem">
          <img src="data:image/svg+xml;utf8,<svg width='100' height='100' xmlns='http://www.w3.org/2000/svg'><rect width='100' height='100' fill='#ddd'/><text x='50' y='50' font-size='12' text-anchor='middle' dominant-baseline='middle'>Store</text></svg>" alt="Online Store" class="problem-image" />
          <h3>Problem: I need an online store to sell my products.</h3>
          <p>That's a great step towards expanding your business! I can build a robust and user-friendly e-commerce platform tailored to your specific needs. This includes setting up product catalogs, shopping carts, secure payment gateways, and order management systems.</p>
        </div>
        <div class="customer-problem">
          <img src="data:image/svg+xml;utf8,<svg width='100' height='100' xmlns='http://www.w3.org/2000/svg'><rect width='100' height='100' fill='#ddd'/><text x='50' y='50' font-size='12' text-anchor='middle' dominant-baseline='middle'>Mobile</text></svg>" alt="Mobile Devices" class="problem-image" />
          <h3>Problem: My website doesn't look good on mobile devices.</h3>
          <p>In today's mobile-first world, having a responsive website is crucial. I can ensure your website adapts seamlessly to different screen sizes, providing an optimal viewing experience for all users, whether they're on a desktop, tablet, or smartphone.</p>
        </div>
      </div>
    </section>

    <section class="customer-information">
      <h2>Get in Touch</h2>
      <p>Let's discuss your project. Please fill out the form below.</p>
      <form name="contact" method="POST" data-netlify="true" id="contact-form" novalidate>
        <input type="hidden" name="form-name" value="contact" />
        <div class="form-group">
          <label for="name">Your Name</label>
          <input type="text" id="name" name="name" required aria-required="true" aria-describedby="name-error" />
          <div class="error-message" id="name-error" aria-live="polite"></div>
        </div>
        <div class="form-group">
          <label for="email">Your Email</label>
          <input type="email" id="email" name="email" required aria-required="true" aria-describedby="email-error" />
          <div class="error-message" id="email-error" aria-live="polite"></div>
        </div>
        <div class="form-group">
          <label for="subject">Subject</label>
          <input type="text" id="subject" name="subject" required aria-required="true" aria-describedby="subject-error" />
          <div class="error-message" id="subject-error" aria-live="polite"></div>
<script>
// Client-side validation for contact form
const form = document.getElementById('contact-form');
const successMsg = document.getElementById('form-success');

function validateEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

if (form) {
  form.addEventListener('submit', function(e) {
    let valid = true;
    // Clear previous errors
    ['name','email','subject','message'].forEach(id => {
      const err = document.getElementById(id+'-error');
      if (err) err.textContent = '';
    });
    // Name
    const name = form.name.value.trim();
    if (!name) {
      document.getElementById('name-error').textContent = 'Name is required.';
      valid = false;
    }
    // Email
    const email = form.email.value.trim();
    if (!email) {
      document.getElementById('email-error').textContent = 'Email is required.';
      valid = false;
    } else if (!validateEmail(email)) {
      document.getElementById('email-error').textContent = 'Please enter a valid email.';
      valid = false;
    }
    // Subject
    const subject = form.subject.value.trim();
    if (!subject) {
      document.getElementById('subject-error').textContent = 'Subject is required.';
      valid = false;
    }
    // Message
    const message = form.message.value.trim();
    if (!message) {
      document.getElementById('message-error').textContent = 'Message is required.';
      valid = false;
    }
    if (!valid) {
      e.preventDefault();
      return false;
    }
    // Show success message (simulate for demo)
    if (successMsg) {
      successMsg.style.display = 'block';
    }
    // Optionally clear form fields
    // form.reset();
  });
}
</script>
        </div>
        <div class="form-group">
          <label for="message">Your Message</label>
          <textarea id="message" name="message" rows="5" required aria-required="true" aria-describedby="message-error"></textarea>
          <div class="error-message" id="message-error" aria-live="polite"></div>
        </div>
        <button type="submit" class="btn-primary">Send Message</button>
        <div id="form-success" class="success-message" style="display:none; margin-top:1rem; color:green;">Thank you! Your message has been sent.</div>
      </form>
    </section>
  </main>
</Layout>

<style>
  main {
    padding: 3rem 0;
  }

  section {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    background-color: var(--bg-secondary);
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin-bottom: 2rem;
  }

  h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--text-primary);
  }

  .conversation {
    margin-top: 1rem;
  }

  .customer-problem {
    margin-bottom: 1.5rem;
    padding: 1.5rem;
    border: 1px solid var(--border-color-light);
    border-radius: 8px;
    background-color: var(--bg-primary);
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }

  .problem-image {
    width: 100px;
    height: 100px;
    object-fit: contain;
  }

  .customer-problem h3 {
    margin-top: 0;
    color: var(--text-accent);
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  label {
    display: block;
    margin-bottom: 0.75rem;
    font-weight: bold;
    color: var(--text-primary);
  }

  input[type="text"],
  input[type="email"],
  textarea {
    width: 100%;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    box-sizing: border-box;
    background-color: var(--bg-input);
    color: var(--text-primary);
    font-size: 1rem;
  }

  textarea {
    resize: vertical;
  }

  .btn-primary {
    display: inline-block;
    background-color: var(--text-accent);
    color: white;
    padding: 1rem 2rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1.1rem;
    transition: background-color 0.3s ease;
  }

  .btn-primary:hover {
    background-color: #4a90e2;
  }
</style>